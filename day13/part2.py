inputRaw = """##..#.#..##
###...#....
##.##.##...
....###..##
####..###..
##.####....
...####.###
###...##...
##...#..###
##...#.....
.##..##.###

##.#...##...#
.#.#####.#.##
.#...........
####.#.###.#.
....###.#.#..
....###.#.#..
####.#.###.#.
.#...........
.#.#####.#.##
##.#...##...#
##.#.#.##...#
.#.#####.#.##
.#...........

##......##.
..##..#....
##....#####
##.#.#..##.
..#.###....
....#..#..#
####..#####
####..#....
#...###....

...#.####.#
####......#
#.###.##.##
#.##.#..#..
#.####..###
.....#..#..
###..####..
.....####..
..##..##..#
#..#......#
##..#....#.
##..#....#.
#..#......#

#.##.#..###.##.
##..###.####...
##..###.####...
#.##.#..###.##.
.#..#..##.#.#..
..##..##.####.#
##...##...#..#.
..##.......##.#
.#..#..#...##..
######........#
##..####.#..#..
#.##.#.#.#.###.
######.#.###.#.
#....#.###.####
##..##.####.#.#

###...###..
###...###..
#.#.#.#...#
...#..##.#.
...#..#....
.###.#.###.
#..##.###..
..#..#.#.##
..#..#.#.##
#..##.###..
.###.#.###.
...#..#....
...#..##.#.
#.#.#.#.#.#
###...###..

###........##..
...#..#.##.#...
...#..#..#.#...
###........##..
......#....#.##
...#.##.#..#.#.
#.###....#.#..#
.##.#..#..###..
.#.......###.#.
...###.#####...
..#..#####...#.
.#.#.#.#.#..###
.#.#.#.####..##
.#.#.#.####..##
.#.#.#.#.#..###

#.#..#..#
#....#..#
..##..#..
##...##..
.##..#..#
..#...##.
#..##.#..
#..##.#..
..#...##.

.#.##..#.#.#..#.#
.#.##..#.#.#..#.#
#..#.###.##....##
#.##.###.#......#
#.##...#.#.####.#
.#..#.##.###..###
#.....###...###..
..#.########..###
..#.###.#........
#..#####.########
.....##..########

...#....#....
#...####...##
#....##....##
.#..####..#..
#..#....#..##
..###..###...
#..##..##..##
..#.#..#.....
#.#.#..#.#.##
#####..######
##.##..##.###
#####..######
#.##.##.##.##

.#....##.#.#..##.
..#.##..###..#...
##...#...#..#....
##...#...#..#....
..#.##..###..#...
.#....##.#.#..##.
###...#..###..##.
##.#..##..##..#.#
.#.#..##..##..#.#

.#.####..##
..##.#.##.#
.#.##.#..#.
.....#....#
##....#..#.
....#......
...##......
##....#..#.
.....#....#

#.#..#.##.#
##....####.
###..######
.#....#..#.
.##..##..##
.##..##...#
.######..##
.#....#..#.
##.##.####.

....#.#
#....#.
#....#.
....#.#
..#.##.
.#.#...
####...
..#.##.
#......
#.#..#.
##.##..
##.##..
#.##.#.
#......
..#.##.

########.#..#.#
...##...#.##.#.
#.####.#......#
#.#..#.#.####.#
.#.##.#.######.
##.##.#########
.##..##..#..#..
#.####.#......#
.##..##.#....#.
..#..#...####..
##....##......#
..####...#..#..
.##..##.#.##.#.
.#..#.#.######.
..#..#..##..##.
.#....#........
..#..#..##..##.

..#.#.#..##..
.#.#...######
##.##....##..
...#####....#
###.####.##.#
.##..##.####.
..###.##....#
.##.#.#......
..#.##..#..#.
#...#.#......
.##.#.#######
.##.#.#######
#...#.#......
..#.##..#..#.
.####.#......

###.#...##.#.##
....#.###.##.##
.....####.#.###
##.###...#...#.
###.#..#####.#.
.....#.####....
..#.####..####.
###.####.###.#.
...####..###..#
###.#..#.#...#.
...#.##.#..####
..#..##.##....#
......#########
######...#..###
#######..#..###
......#########
..#..##.##....#

########...#.
.#...#.......
##.##.#...##.
####.#.##.##.
..#..##...#.#
##.##.#.#.#..
#.####....###
#.##.#..#####
#.##.#..#####
#.####....###
##.##.#.#.#.#
##.##.#.#.#.#
#.####....###
#.##.#..#####
#.##.#..#####
#.####....###
##.##.#.#.#..

..#.#...#####
##..##.#..#..
.##.....##.##
....######...
######.#..#.#
######.#..#.#
....######...
.##.....##.##
##..##.#..#..
..#.#....####
..#.#....####

####.#.#.#.####
.##.####.###.#.
.##...#..#..###
#..##..###.....
####..####.#.#.
.##..###......#
#####..###....#
.....#..#..#.#.
.....#..#..#.#.
#####..###....#
.##..###.....##
####..####.#.#.
#..##..###.....

#..##..#..#.###
.##..##..##.###
##########.....
..#..#...#.#.##
.........######
###..###.......
###..###.#.#...
...##......####
.##..##.##...##
..#..#.........
#......#..#.#..
#.####.####.###
#..##..###.#.##
##....###.#....
##.##.####.....
...##....###.##
##.##.#.####...

##..###...###
##..######.##
.###.....#.##
..#..#.#.#...
..#..#.#.##..
.###.....#.##
##..######.##
##..###...###
...........##
....##.#.#.##
#..####...###

####...#.###.....
.##.##.#.#..#....
.##.##.####.#.##.
#..##..##....####
.....###...#.#..#
#..#.##.#####.##.
#..#..#.#...#....
#######.#.....##.
.##...#####.#..#.
#####..##.#..#..#
#####...#.###....
####..#.#..#.####
####..#.##..#....
#..###.#..#.#.##.
####..#..##.#....

####.#..#
####.#..#
#.####.#.
.#..#.#..
.......##
##.#.##..
##.#.##..
.....#.##
.#..#.#..
#.####.#.
####.#..#

......#....
##..####...
.####...##.
#....#.####
.......#...
..##...#.#.
##..####..#
.#..#...###
.#..#.##.#.
.#.....#.#.
##..###..##
..##..#...#
......##.#.
#....##..##
#....##..##

#....####.#
##..##.#.##
##..##..#..
######...##
.#..#..##.#
#.##.#...##
######.####
######..###
#.##.#...##
.#..#..##.#
######...##

#.####.#.##
..####..###
...##......
.........##
...##...###
......#.###
..#..#..###
...##...#..
.######....
.#....#.#..
.#.##.#..##

..###....#.#..#
###.#..#.#..#.#
..###.##..#....
#...#..#..#....
#..##..#..#....
..###.##..#....
###.#..#.#..#.#
..###....#.#..#
.###....###.#.#
.##..#####..##.
.##..#####..##.
.###....###.#.#
..###....#.#..#
###.#..#.#..#.#
..###.##..#....

..##..#.#
######.#.
.####.##.
......#.#
##..##.##
..##...##
########.
..##.....
......##.

#.####..#.#
#..##...##.
.#.##.##...
.#.##.##...
#..##...##.
#.####..#.#
....#.#..#.
.#...#..#..
##.....##..
..#..##.###
..#..##.###
##.....#...
.#...#..#..
....#.#..#.
#.####..#.#
#..##...##.
.#.##.##...

..###.#..#.##
...#........#
..###......##
##....####...
....#......#.
##...######..
...##.####.##
###.#.####.#.
...##.####.##
..#.#.#..#.#.
##.###....###
......####...
...#.#....#.#
##.###.##.###
...#.#.##...#

#.###.#.###..
#..#.#.#####.
...#.##...#.#
.#####..##..#
##.#.....##.#
###..#...##.#
###..#...##.#
##.#.....##.#
.###.#..##..#
.###.#..##..#
##.#.....##.#
###..#...##.#
###..#...##.#
##.#.....##.#
.#####..##..#

..#####..#####.
..#.#.#..#.###.
###.#.#..#.#.##
..#.#......#.#.
...###.##.###..
..##..#..#..##.
##.###....###.#

.#..##....##..#
##.###.##.###.#
##.....##.....#
##.....##.....#
##.###.##.###.#
.#..##....##..#
.######..######
..#.#.#..#.#.#.
##.##.##.#.##.#
.....######....
###...####...##

#####..#######.
#..#.###....###
....#..######..
.##...#..##..#.
#..##..######..
.##.#.#..##..#.
.....##.####.##
....###.#..#.##
....#..##..##..

..........#......
###...#####......
..##..##...##..##
#.######.#.#.##..
...####....#...##
...#..#....##....
.###..###..######
.#..##..#..##....
#..####..#.#.#...
#.##..##.#.#.....
#........#.#.#...
...#..#...##.####
#.######.#####...
#.##..##.##..#.##
##.#..#.##.#...##

#....####..####..
#..##.#.#........
.##.###.#########
.##.##.#.#.####.#
.##.#...#...##..#
.##.#...#...##..#
.##.##.#.#.####.#
.##.###.#########
#..##.#.#........

..........#..
...##....####
..#..#...#.#.
.#....#..#..#
#......##.#.#
.#....#...#..
.#....#...#..
#......##.#.#
.#....#.....#

###..#....##.#..#
...##...###.###..
...##...###.###..
###..#....##.#..#
##...####.#.#..##
.#.##.####..#####
#.#.#.#..#.##..##
.#.#.####.#....##
#.#....##...#..#.
###.#..#.#.##.##.
.##....#.#.###..#
#...#.###....####
#.......#..#...#.
.######.##.#####.
..#####.##.#####.

##...#.##.#...#
#.###......###.
....#.####.#...
#.###..##...##.
...#..####..#..
##.####..####.#
#.#.########.#.
##.##.####.##.#
######....#####
#..##.####.##..
#..#...##...#..
#..#........#..
#..#........#..
#..#...##...#..
#..##.####.##..

....#.#..
.###...##
##.#..#..
..###.###
#..#.#...
.##.#.###
.##.#.###
#..#.#...
...##.###
##.#..#..
.###...##
....#.#..
####..#..

#...#.##.#.....
#..#..#.....#.#
.######.#..####
.######.#..####
#..#..#.....#.#
#...#.##.#.....
#.#.....##...#.
.#....##..##...
...####.#.#..##
.###..#.#..##..
.##..###.#.#..#
.##..###.#.#..#
.###....#..##..

######.#..#..##.#
..#.#..#.#.#.#..#
.##..##..###.####
.###..###........
...#.##.#.#...##.
.##.#..##..######
.##.#..##..######
...#.##.#.#...##.
.###..###........

##.#.###..##.
#.#.#.#.#..#.
..##.#.######
..##.#.######
#.#.#.#.#..#.
##.#.###..##.
.##...##.##.#
#.#.#.#.##.##
##.#.####..#.
##.#.####..#.
..#.#.#.##.##
.##...##.##.#
##.#.###..##.
#.#.#.#.#..#.
..##.#.######

.##.###.###..##
.##.#..#.#....#
.##..#.####..##
#..#..#..#.##.#
####.##..#....#
...##..#.......
#..#.###.#....#
#..#.#...#.##.#
......##..#..#.
.##....#.#....#
.##.##.#..####.
####..#.###..##
.##.#..##.#..#.
#..######.#..#.
.##.###.##....#

....####.###.#.##
##.#....##..###.#
##.#.#.#....####.
.....####..#..###
..#..#...#..#####
....##...####..#.
###..##.........#
############....#
##..#.#.#.######.
.##..##.#.##.#..#
...#..#####......
###...#.######...
###...#.######...

..#.##....#
..##.#.##.#
####.......
###........
.#..#######
..#.#.#..#.
..#...##.#.
..###......
#####......
.###.#.##.#
#..#..####.
.#..##.##.#
......#..#.
.##.#######
##..#......
##..#......
.##.#######

##.##.###
..####...
.#.####..
#..##..##
.##..##..
###..####
#..##..##
#......##
..#..#...
###..####
#.####.##
#.#..#.##
#......##
##....###
..####...

####.#...##..
.##.##.#####.
.##.#.#######
......######.
####.##...#..
#..##.#.##..#
#..##.#.###.#
####.##...#..
......######.

.#.##..##
#.#.#..#.
...#.##.#
....####.
....####.
...#.##.#
#.#.#..#.
.#.##..##
#.##....#
#####.###
#....##..
...##..##
#..######

.....####..#...##
#..#...#.#.#.##.#
####....#####.###
#..#.........#.#.
.......#..#.###..
#..#.###...#..#..
####...#....###.#
....#..#.########
....#..#.###.####

##.#...#...
##.#..####.
##.#..#####
##.#...#...
..##.#.###.
##.#.##....
####.#.###.
###..#.####
.....##.#.#
....#....#.
..##.#.###.

.#####...#.
##.#.#...#.
####.#...#.
##...#.###.
#.####.####
#....##.###
....#....##
...#..##..#
...#..##..#
....#....##
#....##.###
#.####.####
##...#.###.
####.#...#.
##.#.#...#.

.##.#.#.#
....#...#
##.#..###
....##.#.
.##.##.##
.##.#..#.
.##..#.##
.##..#.##
.##.#..#.
.##.##.##
....##.#.

..###..##..
#..##......
..#...####.
#......##..
#.##..#..#.
#.#.##.##.#
.#....#..#.
###..######
.##.#..##..
.#.#..####.
#..#..####.
#.#........
#.##.......
#..#..####.
.#.#..####.

#.##.#...
..##..###
......###
.####....
######...
.#..#.###
..##...##
##..#####
.##.#.###
#.##.####
.####....

...#...#....#...#
..##.#........#.#
..#..##.#..#.#...
##.####.#..#.####
...##..#....#..##
##.#.###....###.#
#####..#.##.#..##
####...#.##.#...#
###.####....####.
###....##..##....
..#.#...####...#.

.######.#..
..#..#..###
....#...#..
##....####.
########.##
#.#..#.#...
.#.##.#..##
.#....#.##.
#..##..#...
#..##..#...
.#....#.##.
.#.##.#..##
#.#..#.#...

######..#
..##...##
#.##.####
########.
#.##.#..#
.####.#..
######...
##..###.#
########.
#....#.##
#....#.##
########.
##..###.#
######...
.####.##.
#.##.#..#
########.

.##.#...#.###
#..#.#.##.#..
........###..
........###..
#..#.#.##.#..
.##.#...#.###
######.#.#.##
#..#..#..#...
.#....#....##
....#....#..#
#..#.####....
........###.#
#####.#.#...#
#..#..###..##
#..#.#.###...

.##.#..###..#..
.##.#..#..#....
.##...#.##.##..
.##...#.##.##..
.##.#..#..#....
.##.#..###..#..
#..#####.......
.....#####..##.
#####....#....#
..#......###..#
####...#......#
#..##.##.###.##
######.#...##.#

####.#.
#..##.#
#..##..
####.#.
####.#.
####...
.....#.
#####..
#####..
.##...#
.##.#.#
.##..##
.....##

......#.#..##.#
......#.#..##.#
#....###..##.#.
.####...#.#.###
.#..#...###.#..
######....#..##
.#..#.#.#.#.#..
......#....##.#
#.#..#####..#..
......##..####.
..##..##.###...
#.##.#..#....#.
.####.##.....#.

.##.##.##...#..#.
.##....##.##..###
..........#.##.#.
###########...#..
####..#######..##
#..#..#..##..##.#
#..####..#.#..#..
####..####..#####
##########..###..
.##.##.##.###.#..
#..#..#..#...#...
####..#####.#...#
###########.#.###
###.##.###.#..###
####..#####.#.#..
#..#..#..##...#.#
.##.##.##.#.#####

..##.#.
###.##.
###..#.
..##.#.
##..###
..###..
##.#..#

###..#.#..#.##.
#.#.#.#.#.#....
.#...#...##....
##...#...#..##.
..#####..##....
...#######.....
#...#.#..#.####
.##.###...#.##.
##.#.#.#.##.##.
.##.#..##.#....
..#.###........
#..#.#.#.#.#..#
#....#.#.#.#..#

..#.#.###..#.
..#.#.###..#.
.###....##..#
.##..#####.#.
##.#..###....
.#..##...##.#
#.#.##.###.##
#.#.######.##
.#..##...##.#
##.#..###....
.##..#####.#.

.##########..
.#.######.###
.#...##...#..
#..#....#..##
.##########..
#..######..##
##.#.##.#.###
..###..###...
.####..####..
.####..####..
..##....##...

##....##.....
##....##..#..
.#.#..#.#.###
####..##.#.##
#.###.##.#.##
....#....#...
..##.##.#.#..
...###.###...
..##.....####
.###.#.####..
.####.#......

.#.....##....
##.#..#..#..#
.#.#..#..#..#
.#..##.##.##.
.......##....
....##.##.##.
#............
.#.##########
##.....##....
..###########
#....#.##.#..

.##...##...
##.........
.#..#.##.#.
.##########
..##.#..#.#
#.###....##
..###....##
##.########
..##......#
####.####.#
..##.####.#
###.#.#..#.
....######.
....######.
......##...
......##...
....######.

###.#...#..###...
######.##.#..#...
###...###....###.
####..#..##....##
...###.#..##...##
.#...###.####...#
.#...###.####...#
...##..#..##...##
####..#..##....##
###...###....###.
######.##.#..#...
###.#...#..###...
###.#...#..###...

#.#.#.##.#..#.#
#...#.##.#..#.#
...###..#.##.#.
#.#.#.#.######.
##...#...####..
...####..#..#..
#.#.#.#########
.#...##..#..#..
##.#..###....##
###....#.#..#.#
##.##...#....#.
#.#...#.##..##.
.###.#.#.#..#.#
#..#.#..#.##.#.
..#.#.####..###

.#..#....#.
##..##..##.
...########
..#........
##.##.##.##
##.#..##..#
##.#......#
###.######.
.....#..#..
...##.##.##
####......#

..#..#..##...
..#..#..##...
#####...###.#
...###....#.#
#..##...#.#..
#...#..#...##
.#..##..#####
.##....##...#
#..##.#.#.#.#
###.....###.#
#...##.##.##.
#.#.###..##..
.#.#....#####
.#.#....#####
#.#.###..##..
#...#..##.##.
###.....###.#

#...###
.####.#
..##...
#......
#.#..#.
##.#.##
##.#.##
#.#..#.
#...#..
..##...
.####.#
#...###
#.##..#
.#.#...
.#.#...

..####.
##....#
...#...
##.##.#
##.##.#
##.##.#
##....#

###.##.#..#
#..###.#...
#####.#.###
.##.##.####
####..####.
.##..####..
#..#..#.##.
#..###.##.#
####.#.#...
#####.##.#.
.....#.####
.##.....#..
.....####..
.##..###..#
.##..###..#
.....####..
.##.....#..

#..###.#.#..#
.##.#.#..##..
####.#...##..
#..###.######
.##.#.###..##
####..##....#
....##.######
....##.......
.........##..
#..###.######
.....###.##.#
#..##.##.##.#
....###......
.##..#.######
####..##....#
.##.##..#..#.
#####.###..##

..##..#.###.#
..##..###.###
.####.....#.#
#....#.#.####
........#.#.#
......#....#.
#.##.##.##...
#....##..#..#
#....##..###.
#....#..###..
#..#.##.###..
#.##.#....###
.#..#..#....#
..##..##..###
.......#.....
#########...#
#########...#

....##..####.
#..#....#.###
#..#....#.###
....##..####.
##..##.##.#.#
#......##..##
.#######...##
#.#.....###.#
#.#.....###.#
.#######...##
#......##..##
##..##.##.#.#
..#.##..####.

#..##..#.......
#..#...#.##....
.##.#.##..#####
#..######.#####
.##.#..#..##..#
.##....##......
####.#....#.##.
.....#.#####..#
.##.....#......
.##.#..#.#.....
...##.###.#.##.

###.#...#....
....##.###...
....##.###...
#####...#....
##...#......#
...######....
...###..#.##.
##...#.#..#..
##.#.####.###

.#..###.#
#.#.#.###
#.#.#.###
.#..###.#
##.###..#
.#.#..#..
##..#.#.#
.##......
#..#...#.
##..#.##.
####.###.
.#..#.#..
###.#....
#.#....##
..#.#.#..
..#.#.#..
#.##...##

.######.#..##..
...#####.######
##..####..####.
###..#..#.#..#.
##.#.######..##
######..#..#...
##.#.####.####.
####..##.#.##.#
####..##.#.##.#
##.#.####.####.
######..#..#...

.#.#...####
....###.##.
###....#..#
.....#.#..#
######.....
.#.##.##..#
#.#.#..####
#.#.#..####
.#.##.##..#
#.####.....
.....#.#..#

.#.####.#...#.#
.#.####.#...###
###.##.###..#..
.########..##.#
...#..#....##.#
#........##..##
#.##..##.##.#..
..######....###
.###..###..##.#
.##....##.##.##
..##..##...#..#
#.##..##.###.##
#.#....#.#.##.#
#........###..#
...#..#...##.##

...##.###
##.#.....
##.##....
..#.###.#
.#....#..
####..###
##.#.##.#
##.#.##.#
####..###

.#.##.##.##
##.##.##.##
..###...###
#...#..###.
###.....##.
.###.#..#..
#.#....####
#.#....####
.###.#..#..
###.....##.
#...#..###.
..###...###
##.##.##.##
.#.##.##.##
###...#..#.

#.##.#.#.
#....#.##
#....#.##
#.##.#.#.
##..##...
######..#
#.##.##.#
######.#.
#.##.#..#
.####.#.#
.#..#.#.#
.#..#.#.#
..#...###
..##...##
#######..

#.##...####..##
##.#..##...#...
#....#.##.#.##.
####.#.#.###.#.
#######.##.##..
#######.##.##..
####.#.#.###.#.
#....#.##.#.##.
##.#..##...#...
#.##...####..##
.#...#..###.#.#
#.##..#.######.
..####.........
..####.........
#.##..#.######.
.#...#..###.#.#
#.##..#####..##

###.###.###
#..#.##..#.
#..###.#.#.
#######....
.##.#.#.##.
....##....#
####.#..###
.##..##.#..
.##..##.#..
####.#..###
....##....#
.##.#.#.##.
#######....

....#...##.
#..#.#...#.
.##..#.....
####.#..###
.##.#...##.
.##...##..#
....#..#...
.....#....#
####.#..##.
#..##.##..#
####.##.#.#
#..#.#.####
#..#.#.####
####.##.###
#..##.##..#
####.#..##.
.....#....#

..##..#..####
#.#..###.#..#
#.#.....#....
.#..####.####
..##.##.#.##.
...###..#.##.
##.######.##.
..####...#..#
.#..##.......
.#####..#####
.#####..#####
.#..#........
..####...#..#

....##..##...
...##.##.##..
#.#.##..##.#.
###..#..#..##
#.....##.....
...#.#..#.#..
.##.######.##
#.#...##...#.
#..#.#..#.#..
##.########.#
##.#.#..#.#.#
###.#.####.##
###..####..##
.#.#..##..#.#
.#.#..##..#.#

..#..#..###..
.###.#####...
.#..##..#.#..
##....#.##...
####..##..###
..##..#..##..
#.#.#...#####
..#.###.#####
###..####....
#.#..#.###...
####.########
......#..#...
#....#..#..##
.#..#....#.##
#####.#...#..
###.#.#...#..
.#..#....#.##

....#..##
.##.#.#.#
.##..##..
####..#.#
####..#.#
.##...#..
.##.#.#.#
....#..##
#..#....#

..#.##....##.#..#
....#.####.#....#
..#.###..###.#..#
.#.#...##...#.#.#
.###..#####.###..
####.#....#.####.
##..#.####.#..###
##..#.####.#..###
####.#....#.####.

###.##.###...####
.#.####.#..##..#.
##..##..########.
##......########.
.##.##.##..##..##
..##..##...##...#
##......###..###.

###......########
###...#..########
..#...###########
.##.#..#.#.#..#.#
###..##..#.####.#
#......#....##...
#.#.#...#........
##..#####...##...
#...#...#........
#.#.#..##.#....#.
#..###.##...##...
"""

testInputRaw = """#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#
"""

#patternsRaw = testInputRaw.split('\n\n')
patternsRaw = inputRaw.split('\n\n')

patterns = [patternRaw.splitlines() for patternRaw in patternsRaw]


def getPatternSummary(pattern, firstSummary = 0):
    # check if vertical mirror
    for vIdx in range(1, len(pattern[0])):
        vMirror = False
        for vLen in range(1, min(vIdx+1, len(pattern[0]) - vIdx + 1)): # either left or the right side is shorter
            # check to the left anyway though
            if [patternRow[vIdx-vLen] for patternRow in pattern] == [patternRow[vIdx+vLen-1] for patternRow in pattern]:
                vMirror = True
            else:
                # no longer mirrored, or never mirrored to begin with
                if vMirror:
                    if vLen == min(vIdx+1, len(pattern[0]) - vIdx + 1):
                        if vIdx != firstSummary:
                            return vIdx
                        else:
                            vMirror = False
                    else:
                        vMirror = False
                        break
                else:
                    break
        if vMirror and vIdx != firstSummary:
            return vIdx

    # check if horizontal mirror
    for hIdx in range(1, len(pattern)):
        hMirror = False
        for hLen in range(1, min(hIdx+1, len(pattern) - hIdx + 1)):
            if hIdx + hLen <= len(pattern) and pattern[hIdx-hLen] == pattern[hIdx+hLen-1]:
                hMirror = True
            else:
                if hMirror:
                    if hLen == min(hIdx+1, len(pattern) - hIdx + 1):
                        if hIdx * 100 != firstSummary:
                            return hIdx * 100
                        else:
                            hMirror = False
                    else:
                        hMirror = False
                        break
                else:
                    break
        if hMirror and hIdx * 100 != firstSummary:
            return hIdx * 100
    return 0


summarySum = 0
for pattern in patterns:
    firstSummary = getPatternSummary(pattern)
    newSummary = 0
    for y in range(len(pattern)):
        if newSummary > 0:
            break
        for x in range(len(pattern[0])):
            if newSummary > 0:
                break
            newPattern = [[char for char in row] for row in pattern[:]]
            if newPattern[y][x] == '#':
                newPattern[y][x] = '.'
            else:
                newPattern[y][x] = '#'
            newSummary = getPatternSummary(newPattern, firstSummary)
            if newSummary == firstSummary:
                newSummary = 0
    summarySum += newSummary

print(summarySum)

